<div class="cart-section">
    <div class="heading-text mt-4">{{"Checkout" | translate}}</div>
    <div class="row gy-3">
        <div class="col-md-8">
            <form [formGroup]="checkoutForm">
                <div class="row mt-3 border-bottom-1 pb-3">
                    <div class="col-md-12">
                        <div class="fs-5">{{"Contact information" | translate}}
                        </div>
                        <div class="mt-1 text-muted">
                            {{"We'll use this email" | translate}}
                        </div>
                        <mat-form-field appearance="outline" class="w-100 mt-2">
                            <mat-label>{{"Email ID" | translate}}</mat-label>
                            <input matInput [placeholder]="'Email ID' | translate" formControlName="emailId">
                        </mat-form-field>
                    </div>
                    <div class="col-md-12">
                        <div class="fs-5">{{"Billing address" | translate}}
                        </div>
                        <div class="mt-1 text-muted">{{"Enter the billing address" |
                            translate}}</div>
                        <mat-form-field appearance="outline" class="w-100 mt-2">
                            <mat-label>{{"Country" | translate}}</mat-label>
                            <input matInput [placeholder]="'Country' | translate" formControlName="country">
                        </mat-form-field>
                    </div>
                    <div class="col-md-6">
                        <mat-form-field appearance="outline" class="w-100 mt-2">
                            <mat-label>{{"First Name" | translate}}</mat-label>
                            <input matInput [placeholder]="'First Name' | translate" formControlName="firstName">
                        </mat-form-field>
                    </div>
                    <div class="col-md-6">
                        <mat-form-field appearance="outline" class="w-100 mt-2">
                            <mat-label>{{"Last Name" | translate}}</mat-label>
                            <input matInput [placeholder]="'Last Name' | translate" formControlName="lastName">
                        </mat-form-field>
                    </div>
                    <div class="col-md-12">
                        <mat-form-field appearance="outline" class="w-100 mt-2">
                            <mat-label>{{"Address" | translate}}</mat-label>
                            <input matInput [placeholder]="'Address' | translate" formControlName="address1">
                        </mat-form-field>
                    </div>
                    <div class="col-md-12">
                        <mat-form-field appearance="outline" class="w-100 mt-2">
                            <mat-label>{{"Apartment, suite, etc. (optional)" | translate}}</mat-label>
                            <input matInput [placeholder]="'Apartment, suite, etc. (optional)' | translate"
                                formControlName="address2">
                        </mat-form-field>
                    </div>
                    <div class="col-md-6">
                        <mat-form-field appearance="outline" class="w-100 mt-2">
                            <mat-label>{{"City" | translate}}</mat-label>
                            <input matInput [placeholder]="'City' | translate" formControlName="city">
                        </mat-form-field>
                    </div>
                    <div class="col-md-6">
                        <mat-form-field appearance="outline" class="w-100 mt-2">
                            <mat-label>{{"Postal Code" | translate}}</mat-label>
                            <input matInput [placeholder]="'Postal Code' | translate" formControlName="postalCode">
                        </mat-form-field>
                    </div>
                    <div class="col-md-12">
                        <mat-form-field appearance="outline" class="w-100 mt-2">
                            <mat-label>{{"Mobile Number" | translate}}</mat-label>
                            <input matInput [placeholder]="'Mobile Number' | translate" formControlName="mobile">
                        </mat-form-field>
                    </div>
                    <div class="col-md-12">
                        <mat-checkbox class="example-margin" formControlName="addNote">
                            {{"Add a note to your order" | translate}}
                        </mat-checkbox>
                        <div *ngIf="checkoutForm.controls['addNote'].value">
                            <mat-form-field class="w-100">
                                <mat-label>{{"Notes about your order" | translate}}</mat-label>
                                <textarea matInput cdkTextareaAutosize formControlName="note"></textarea>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="col-md-12 mt-3">
                        <div class="d-flex">
                            <div class="fs-5">{{"Payment Options" | translate}}
                            </div>
                            <span class="align-items-center d-flex ms-2"><mat-icon class="kt-pointer"
                                    pTooltip="Cash on Delivery (COD) is available only in city Mumbai and Navi Mumbai."
                                    tooltipPosition="right">info</mat-icon></span>
                        </div>
                        <!-- {{checkoutForm.value | json}} -->
                        <mat-radio-group aria-label="Select an option" formControlName="paymentMode">
                            <mat-radio-button value="cod"
                                [disabled]="checkoutForm.controls['city'].value=='' || checkoutForm.controls['postalCode'].value==''">
                                {{"Cash on Delivery" | translate}} (COD)
                            </mat-radio-button>
                            <mat-radio-button value="online"
                                [disabled]="checkoutForm.controls['city'].value=='' || checkoutForm.controls['postalCode'].value==''">
                                {{"Online Payment" | translate}}
                            </mat-radio-button>
                        </mat-radio-group>
                    </div>
                    <div class="col-md-12">
                        <mat-checkbox class="example-margin" formControlName="isGST"
                            (change)="isGstRequired($event)">{{"GST Invoice" | translate}}</mat-checkbox>
                        <div *ngIf="checkoutForm.controls['isGST'].value">
                            <mat-form-field class="w-100" appearance="outline">
                                <mat-label>{{"GST Number" | translate}}</mat-label>
                                <input matInput [placeholder]="'GST Number' | translate" formControlName="gstNumber">
                            </mat-form-field>
                        </div>
                    </div>
                </div>
                <!-- <div class="fs-5 text-muted mt-3">
                    {{"By proceeding with your purchase" | translate}}
                </div>
                <div class="d-flex justify-content-between mt-3">
                    <div class="d-flex text-muted underline kt-pointer" (click)="goToCart()">
                        <div><mat-icon>keyboard_backspace</mat-icon></div><span class="ms-2">
                            {{"Return to Cart" | translate}}</span>
                    </div>
                    <div>
                        <div class="place-order-button text-nowrap"
                            [class.place-order-button-disable]="checkoutForm.invalid" (click)="placeOrder()">
                            {{"Place Order" | translate}}
                        </div>
                    </div>
                </div> -->
            </form>
        </div>
        <div class="col-md-4">
            <div class="card">
                <div class="card-body common-background-color" style="border-radius: 6px;">
                    <div>
                        {{"Order Summary" | translate}}
                    </div>
                    <div *ngFor="let product of productList;let i = index;">
                        <div class="row my-5" *ngFor="let variant of product.variant;let j = index;">
                            <div class="col-md-3">
                                <div class="checkout-product-image-wrapper">
                                    <img class="checkout-product-image" [src]="baseUrl+'/'+variant.image">
                                    <span class="checkout-product-image-quantity">{{product.productQty}}</span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div>{{product.productName}}</div>
                                <div>₹{{variant.price}}</div>
                                <div>{{"Size" | translate}} : {{product.size}} {{product.unit}}</div>
                            </div>
                            <div class="col-md-3">
                                ₹{{(variant.qty * variant.price * product.productQty) | number}}
                            </div>
                        </div>
                    </div>
                    <div class="border-bottom-1 border-top-1">
                        <div class="accordion" id="couponAccordionMain">
                            <div class="accordion-item border-0">
                                <h2 class="accordion-header" id="headingTwo">
                                    <button class="accordion-button collapsed px-0 fw-bold" type="button"
                                        data-bs-toggle="collapse" data-bs-target="#couponAccordion"
                                        aria-expanded="false" aria-controls="couponAccordion">
                                        {{"Add coupons" | translate}}
                                    </button>
                                </h2>
                                <div id="couponAccordion" class="accordion-collapse collapse"
                                    aria-labelledby="headingTwo" data-bs-parent="#couponAccordionMain">
                                    <div class="accordion-body px-0">
                                        <div class="d-flex">
                                            <mat-form-field appearance="outline" class="w-100">
                                                <input matInput [placeholder]="'Enter code' | translate"
                                                    [(ngModel)]="couponCode"
                                                    [disabled]="discountedTotal ? true : false">
                                            </mat-form-field>
                                            <div class="coupon-apply mt-2 ms-2" (click)="applyCoupon()"
                                                [class.coupon-apply-disable]="couponCode==''||discountedTotal">
                                                {{"Apply" | translate}}
                                            </div>
                                        </div>
                                        <div class="text-muted kt-pointer" (click)="removeCoupon()"
                                            *ngIf="discountedTotal">{{"Remove Coupon" | translate}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="border-bottom-1">
                        <div class="d-flex fs-4 justify-content-between py-2">
                            <div>{{"Subtotal" | translate}}</div>
                            <div>₹{{subTotal | number}}</div>
                        </div>
                        <div class="d-flex justify-content-between">
                            <div class="text-muted fs-5" *ngIf="discountedTotal">{{"Discount" | translate}}</div>
                            <div *ngIf="discountedTotal" class="fs-5 pb-2 text-end text-muted">- ₹{{discountedTotal |
                                number}}</div>
                        </div>
                    </div>
                    <div>
                        <div class="d-flex fs-2 justify-content-between py-2">
                            <div>{{"Total" | translate}}</div>
                            <div>₹{{total | number}}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-8">
            <div class="fs-5 text-muted mt-3">
                {{"By proceeding with your purchase" | translate}}
            </div>
            <div class="d-flex justify-content-between mt-3">
                <div class="d-flex text-muted underline kt-pointer" (click)="goToCart()">
                    <div><mat-icon>keyboard_backspace</mat-icon></div><span class="ms-2">
                        {{"Return to Cart" | translate}}</span>
                </div>
                <div>
                    <div class="place-order-button text-nowrap"
                        [class.place-order-button-disable]="checkoutForm.invalid" (click)="placeOrder()">
                        {{"Place Order" | translate}}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>